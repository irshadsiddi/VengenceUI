{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "interactive-book",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "components/ui/interactive-book.tsx",
      "content": "\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport { ChevronLeft, ChevronRight, RefreshCcw, X, BookOpen } from 'lucide-react';\n\nexport interface BookPage {\n    title?: string;\n    content: React.ReactNode;\n    backContent?: React.ReactNode;\n    pageNumber: number;\n}\n\nexport interface InteractiveBookProps {\n    coverImage: string;\n    bookTitle?: string;\n    bookAuthor?: string;\n    pages: BookPage[];\n    className?: string;\n    width?: number | string;\n    height?: number | string;\n}\n\nexport default function InteractiveBook({\n    coverImage,\n    bookTitle = \"Book Title\",\n    bookAuthor = \"Author Name\",\n    pages,\n    className,\n    width = 350,\n    height = 500,\n}: InteractiveBookProps) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [currentPageIndex, setCurrentPageIndex] = useState(-1);\n    const [isHovering, setIsHovering] = useState(false);\n\n    // Calculate dynamic width/height values for animations\n    const widthNum = typeof width === 'number' ? width : 350;\n\n    // Sync container shift with cover open\n    const BOOK_OPEN_DURATION = 1.5;\n    const EASING: [number, number, number, number] = [0.25, 0, 0, 1]; // milder smoothing\n\n    const handleOpenBook = () => setIsOpen(true);\n\n    const handleCloseBook = (e?: React.MouseEvent) => {\n        e?.stopPropagation();\n        setIsOpen(false);\n        setCurrentPageIndex(-1);\n    };\n\n    const nextPage = (e?: React.MouseEvent) => {\n        e?.stopPropagation();\n        if (currentPageIndex < pages.length - 1) {\n            setCurrentPageIndex((prev) => prev + 1);\n        }\n    };\n\n    const prevPage = (e?: React.MouseEvent) => {\n        e?.stopPropagation();\n        if (currentPageIndex >= 0) {\n            setCurrentPageIndex((prev) => prev - 1);\n        }\n    };\n\n    const restartBook = (e?: React.MouseEvent) => {\n        e?.stopPropagation();\n        setCurrentPageIndex(-1);\n    };\n\n    const handleSliderChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setCurrentPageIndex(parseInt(e.target.value, 10));\n    };\n\n    // Keyboard navigation\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'ArrowRight') nextPage();\n            if (e.key === 'ArrowLeft') prevPage();\n            if (e.key === 'Escape') handleCloseBook();\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [isOpen, currentPageIndex]);\n\n    return (\n        <div\n            className={cn(\"relative flex items-center justify-center perspective-[2000px]\", className)}\n            style={{\n                width: typeof width === 'number' ? width * 3.5 : '100%',\n                height: typeof height === 'number' ? height + 100 : 'auto'\n            }}\n        >\n            <motion.div\n                className={cn(\n                    \"relative preserve-3d\"\n                )}\n                style={{ width, height }}\n                initial={{ x: 0 }}\n                animate={{ x: isOpen ? widthNum / 2 : 0 }}\n                transition={{ duration: BOOK_OPEN_DURATION, ease: EASING }}\n            >\n\n                {/* Front Cover */}\n                <motion.div\n                    className=\"absolute inset-0 w-full h-full origin-left\"\n                    initial={{ rotateY: 0, zIndex: 100 }}\n                    animate={{\n                        rotateY: isOpen ? -180 : (isHovering ? -15 : 0),\n                        zIndex: isOpen ? 0 : 100\n                    }}\n                    transition={{\n                        rotateY: { duration: BOOK_OPEN_DURATION, ease: EASING },\n                        zIndex: { delay: isOpen ? BOOK_OPEN_DURATION * 0.6 : BOOK_OPEN_DURATION * 0.4 }\n                    }}\n                    style={{ transformStyle: 'preserve-3d' }}\n                    onClick={!isOpen ? handleOpenBook : undefined}\n                    onHoverStart={() => !isOpen && setIsHovering(true)}\n                    onHoverEnd={() => setIsHovering(false)}\n                >\n                    {/* Front Face */}\n                    <div\n                        className=\"absolute inset-0 w-full h-full backface-hidden rounded-r-md rounded-l-sm shadow-2xl cursor-pointer overflow-hidden group\"\n                        style={{ transform: 'translateZ(0.5px)' }}\n                    >\n                        {/* Image Background */}\n                        <div\n                            className=\"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-105\"\n                            style={{ backgroundImage: `url(${coverImage})` }}\n                        />\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent\" />\n\n                        <div className=\"absolute bottom-4 left-3 right-3 text-white text-left\">\n                            <h1 className=\"text-sm font-serif font-bold tracking-wide mb-1 drop-shadow-md leading-tight\">{bookTitle}</h1>\n                            <p className=\"text-[8px] font-sans tracking-widest opacity-90 uppercase border-t border-white/30 pt-1 inline-block\">{bookAuthor}</p>\n                        </div>\n\n                        {/* Spine Highlight */}\n                        <div className=\"absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-r from-white/30 to-transparent opacity-40\" />\n                        <div className=\"absolute left-[12px] top-0 bottom-0 w-[1px] bg-black/30\" />\n                    </div>\n\n                    {/* Back Face (Inner Cover) */}\n                    <div\n                        className=\"absolute inset-0 w-full h-full backface-hidden rounded-l-md rounded-r-sm bg-[#fdfbf7] rotate-y-180 flex flex-col p-8 border-r border-neutral-200 shadow-xl cursor-pointer hover:bg-[#fcfaf5] transition-colors\"\n                        style={{ transform: 'rotateY(180deg) translateZ(0.5px)' }}\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            prevPage();\n                        }}\n                    >\n                        <div className=\"flex-1 flex flex-col justify-center items-center text-center opacity-80\">\n                            <h2 className=\"text-2xl font-serif text-neutral-800 mb-2 tracking-wide\">{bookTitle}</h2>\n                            <div className=\"w-8 h-[1px] bg-neutral-300 mb-3\" />\n                            <p className=\"text-xs text-neutral-500 uppercase tracking-widest\">Interactive Edition</p>\n                        </div>\n                    </div>\n                </motion.div>\n\n                {/* Pages Stack */}\n                <div className=\"absolute inset-0 w-full h-full z-0\" style={{ transformStyle: 'preserve-3d' }}>\n                    {pages.map((page, index) => {\n                        const isFlipped = index <= currentPageIndex;\n                        // Stagger delays slightly for a realistic \"whip\" effect if user clicks fast, \n                        // but mostly we want instant feedback with smooth transition.\n\n                        return (\n                            <motion.div\n                                key={index}\n                                className=\"absolute inset-0 w-full h-full origin-left bg-[#fdfbf7] rounded-r-md rounded-l-sm shadow-sm border border-neutral-100\"\n                                style={{ transformStyle: 'preserve-3d' }}\n                                initial={{ rotateY: 0, zIndex: pages.length - index }}\n                                animate={{\n                                    rotateY: isFlipped ? -180 : 0,\n                                    zIndex: isFlipped ? index + 1 : pages.length - index\n                                }}\n                                transition={{\n                                    duration: 0.6,\n                                    ease: [0.645, 0.045, 0.355, 1]\n                                }}\n                            >\n                                {/* Front Face (Right Side) */}\n                                <div\n                                    className=\"absolute inset-0 w-full h-full backface-hidden p-8 flex flex-col bg-[#fdfbf7] cursor-pointer hover:bg-[#fcfaf5] transition-colors\"\n                                    style={{ transform: 'translateZ(0.5px)' }}\n                                    onClick={(e) => {\n                                        e.stopPropagation();\n                                        nextPage();\n                                    }}\n                                >\n                                    <div className=\"flex-1\">\n                                        <div className=\"text-xs text-neutral-400 text-right mb-4 font-sans tracking-wider\">\n                                            {page.pageNumber * 2 - 1}\n                                        </div>\n                                        <div className=\"prose prose-neutral prose-sm max-w-none font-serif text-neutral-700 leading-relaxed select-none\">\n                                            {page.title && (\n                                                <h3 className=\"text-xl font-medium text-center mb-6 text-neutral-800 tracking-tight\">\n                                                    {page.title}\n                                                </h3>\n                                            )}\n                                            {page.content}\n                                        </div>\n                                    </div>\n                                    <div className=\"absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-black/5 to-transparent pointer-events-none mix-blend-multiply\" />\n                                </div>\n\n                                {/* Back Face (Left Side) */}\n                                <div\n                                    className=\"absolute inset-0 w-full h-full backface-hidden rotate-y-180 bg-[#fdfbf7] border-r border-neutral-200 overflow-hidden p-8 flex flex-col cursor-pointer hover:bg-[#fcfaf5] transition-colors\"\n                                    style={{ transform: 'rotateY(180deg) translateZ(0.5px)' }}\n                                    onClick={(e) => {\n                                        e.stopPropagation();\n                                        prevPage();\n                                    }}\n                                >\n                                    <div className=\"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-black/5 to-transparent pointer-events-none mix-blend-multiply\" />\n\n                                    <div className=\"flex-1 overflow-hidden\">\n                                        <div className=\"text-xs text-neutral-400 text-left mb-4 font-sans tracking-wider\">\n                                            {page.pageNumber * 2}\n                                        </div>\n                                        <div className=\"prose prose-neutral prose-sm max-w-none font-serif text-neutral-700 leading-relaxed select-none h-full flex flex-col\">\n                                            {page.backContent ? (\n                                                <div className=\"flex-1\">\n                                                    {page.backContent}\n                                                </div>\n                                            ) : (\n                                                <div className=\"w-full h-full flex items-center justify-center opacity-[0.03]\">\n                                                    <span className=\"font-serif text-8xl italic font-bold text-black\">\n                                                        {page.pageNumber * 2}\n                                                    </span>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                </div>\n                            </motion.div>\n                        );\n                    })}\n\n                    {/* Back Cover (Static) */}\n                    <div\n                        className=\"absolute inset-0 w-full h-full bg-[#fdfbf7] rounded-r-md rounded-l-sm shadow-xl border border-neutral-200\"\n                        style={{ transform: 'translateZ(-1px)', zIndex: -1 }}\n                    >\n                        <div className=\"absolute inset-0 p-8 flex flex-col items-center justify-center text-center opacity-40\">\n                            <p className=\"font-serif text-neutral-500 italic\">The End</p>\n                            <button\n                                onClick={restartBook}\n                                className=\"mt-4 flex items-center gap-2 px-4 py-2 rounded-full bg-neutral-100 hover:bg-neutral-200 transition-colors text-sm text-neutral-600 cursor-pointer\"\n                            >\n                                <RefreshCcw size={14} /> Read Again\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Controls Bar Removed */}\n\n            </motion.div>\n\n            {/* Side Navigation Arrows */}\n            <AnimatePresence>\n                {isOpen && (\n                    <>\n                        {/* Close Button */}\n                        <motion.button\n                            initial={{ opacity: 0, scale: 0.8 }}\n                            animate={{ opacity: 1, scale: 1 }}\n                            exit={{ opacity: 0, scale: 0.8 }}\n                            onClick={handleCloseBook}\n                            className=\"absolute top-8 right-8 p-2 rounded-full bg-white/50 dark:bg-neutral-800/50 hover:bg-white dark:hover:bg-neutral-800 border border-transparent hover:border-neutral-200 dark:hover:border-neutral-700 backdrop-blur-sm text-neutral-800 dark:text-neutral-100 z-[1000] transition-all hover:scale-110 shadow-sm hover:shadow-xl\"\n                        >\n                            <X size={24} />\n                        </motion.button>\n                    </>\n                )}\n            </AnimatePresence>\n\n            {/* Hint */}\n            {!isOpen && (\n                <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 1, duration: 1 }}\n                    className=\"absolute bottom-4 text-neutral-500 dark:text-neutral-400 text-sm font-medium tracking-widest uppercase cursor-pointer z-50 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors\"\n                    onClick={handleOpenBook}\n                >\n                    Click to Open\n                </motion.div>\n            )}\n        </div>\n    );\n}\n",
      "type": "registry:ui",
      "target": "components/ui/interactive-book.tsx"
    }
  ]
}