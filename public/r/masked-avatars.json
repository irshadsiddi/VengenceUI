{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "masked-avatars",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "components/ui/masked-avatars.tsx",
      "content": "\"use client\"\nimport React, { useState } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { motion } from \"framer-motion\"\n\ninterface Avatar {\n    avatar: string\n    name: string\n}\n\nexport interface MaskedAvatarsProps {\n    avatars?: Avatar[]\n    size?: number // avatar size (responsive base)\n    border?: number\n    column?: number\n    movement?: number // hover lift sensitivity\n    transition?: number // animation duration\n    ltr?: boolean\n    ringed?: boolean\n    offset?: number // text ring rotation offset\n    blurOnRest?: boolean // NEW: only blur when not hovered\n    className?: string\n}\n\nconst defaultAvatars: Avatar[] = [\n    { avatar: \"https://i.pravatar.cc/150?u=a\", name: \"Garou\" },\n    { avatar: \"https://i.pravatar.cc/150?u=b\", name: \"Johan\" },\n    { avatar: \"https://i.pravatar.cc/150?u=c\", name: \"Light Yagami\" },\n    { avatar: \"https://i.pravatar.cc/150?u=d\", name: \"Vegeta\" },\n    { avatar: \"https://i.pravatar.cc/150?u=e\", name: \"Light Yagami\" },\n]\n\nexport function MaskedAvatars({\n    avatars = defaultAvatars,\n    size = 70,\n    border = 8,\n    column = 40,\n    movement = 0.72,\n    transition = 0.18,\n    ringed = true,\n    offset = -3,\n    blurOnRest = true,\n    className\n}: MaskedAvatarsProps) {\n    const [hoveredIndex, setHoveredIndex] = useState<number | null>(null)\n\n    // Optimize derived values with useMemo\n    const { dynamicSize, maskImage } = React.useMemo(() => {\n        const dynamicSize = `clamp(${size - 20}px, ${size}px, ${size + 30}px)`\n        const circle = (border * 2 + size) / 2\n        const radX = circle - column - border\n        const maskImage = `radial-gradient(${circle}px ${circle}px at ${radX}px 50%, transparent ${circle - 0.5}px, white ${circle}px)`\n        return { dynamicSize, maskImage }\n    }, [size, border, column])\n\n    const transitionConfig = React.useMemo(() => ({\n        type: \"spring\" as const,\n        stiffness: 260,\n        damping: 20,\n    }), [])\n\n    return (\n        <div\n            className={cn(\"relative flex items-center\", className)}\n            style={{\n                gap: `min(6vw, ${size * 0.5}px)`,\n                \"--size\": dynamicSize,\n            } as React.CSSProperties}\n            role=\"group\"\n            aria-label=\"Animated avatar group\"\n        >\n            <div className=\"relative flex items-center\">\n                <ul\n                    className=\"m-0 p-0 list-none grid grid-flow-col content-end\"\n                    style={{\n                        height: column,\n                        gridAutoColumns: column,\n                        transform: `translateX(${(size - column) * 0.5}px)`,\n                    }}\n                    role=\"list\"\n                >\n                    {avatars.map((person, index) => {\n                        const isHovered = hoveredIndex === index\n                        const isPrevHovered = hoveredIndex === index - 1\n\n                        const baseOffset = -size * 1.5\n                        const moveOffset = size * movement\n\n                        const maskPosition = isPrevHovered\n                            ? `0 ${baseOffset - moveOffset}px`\n                            : isHovered\n                                ? `0 ${baseOffset + moveOffset}px`\n                                : `0 ${baseOffset}px`\n\n                        return (\n                            <motion.li\n                                key={index}\n                                className=\"relative grid content-end outline-none pointer-events-none will-change-transform\"\n                                role=\"listitem\"\n                                style={{\n                                    width: dynamicSize,\n                                    aspectRatio: \"1/3\",\n                                    transform: `translate(\n                    ${(size - column) * -0.5}px,\n                    ${(size - column) * 0.5}px\n                  )`,\n                                    zIndex: avatars.length - index,\n                                }}\n                                tabIndex={0}\n                                aria-label={`Avatar of ${person.name}`}\n                                onMouseEnter={() => setHoveredIndex(index)}\n                                onMouseLeave={() => setHoveredIndex(null)}\n                                onFocus={() => setHoveredIndex(index)}\n                                onBlur={() => setHoveredIndex(null)}\n                                onTouchStart={() => setHoveredIndex(index)}\n                            >\n                                {ringed && (\n                                    <div\n                                        className=\"name absolute left-1/2 text-center uppercase font-mono font-normal pointer-events-none\"\n                                        aria-hidden=\"true\"\n                                        style={{\n                                            width: size,\n                                            height: size,\n                                            borderRadius: \"50%\",\n                                            bottom: 0,\n                                            transform: `translate(-50%, ${isHovered ? -movement * 100 : 0\n                                                }%)`,\n                                            transition: `transform ${transition}s ease-out`,\n                                        }}\n                                    >\n                                        {person.name.split(\"\").map((char, i) => (\n                                            <span\n                                                key={i}\n                                                className=\"absolute will-change-transform\"\n                                                style={{\n                                                    offsetPath: \"border-box\",\n                                                    offsetDistance: `${(offset + i) * 0.75}ch`,\n                                                    offsetAnchor: \"50% 130%\",\n                                                    transform: isHovered\n                                                        ? \"translate(0, 0)\"\n                                                        : \"translate(0, 100%)\",\n                                                    filter: isHovered\n                                                        ? \"blur(0px)\"\n                                                        : blurOnRest\n                                                            ? \"blur(4px)\"\n                                                            : \"blur(0px)\",\n                                                    opacity: isHovered ? 1 : 0,\n                                                    transition: `transform ${transition}s ease-out, opacity ${transition}s ease-out, filter ${transition}s ease-out`,\n                                                }}\n                                            >\n                                                {char}\n                                            </span>\n                                        ))}\n                                    </div>\n                                )}\n\n                                <div className=\"avatar-holder absolute inset-0 grid content-end\">\n                                    <motion.span\n                                        className={cn(\n                                            \"avatar inline-block w-full aspect-square rounded-full relative overflow-hidden pointer-events-auto border-[3px] border-background will-change-transform\",\n                                            \"focus:ring-2 focus:ring-offset-2 focus:ring-foreground\"\n                                        )}\n                                        role=\"img\"\n                                        aria-label={person.name}\n                                        style={{\n                                            maskImage: index === 0 ? \"none\" : maskImage,\n                                            WebkitMaskImage: index === 0 ? \"none\" : maskImage,\n                                            maskSize: \"100% 400%\",\n                                            WebkitMaskSize: \"100% 400%\",\n                                            maskRepeat: \"no-repeat\",\n                                        }}\n                                        animate={{\n                                            maskPosition: index === 0 ? \"0 0\" : maskPosition,\n                                            y: isHovered ? -movement * 100 + \"%\" : \"0%\",\n                                            scale: isHovered ? 1.05 : 1,\n                                            opacity:\n                                                hoveredIndex !== null && hoveredIndex !== index\n                                                    ? 0.7\n                                                    : 1,\n                                        }}\n                                        transition={transitionConfig}\n                                    >\n                                        <img\n                                            src={person.avatar}\n                                            alt={person.name}\n                                            className=\"absolute inset-0 w-full h-full object-cover bg-muted\"\n                                        />\n                                    </motion.span>\n                                </div>\n\n                                {/* Hover/Tap Hit Area */}\n                                <div className=\"absolute bottom-0 w-full aspect-square pointer-events-auto\" />\n                            </motion.li>\n                        )\n                    })}\n                </ul>\n\n\n            </div>\n        </div>\n    )\n}\n",
      "type": "registry:ui",
      "target": "components/ui/masked-avatars.tsx"
    }
  ]
}