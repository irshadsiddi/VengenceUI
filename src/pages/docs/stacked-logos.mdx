import { CodeBlock, Dependencies } from '@/components/docs/component-installation'
import { CLICommand } from '@/components/docs/cli-command'
import { PropsTable } from '@/components/docs/props-table'
import { ComponentPreview } from '@/components/docs/component-preview'
import StackedLogosDemo, { StackedLogosFast, StackedLogosSlow, StackedLogosTwoGroups, StackedLogosWide } from '@/components/docs/stacked-logos'

# Stacked Logos

Multiple logo groups that animate in/out while stacked on top of each other. Features a Vercel-style grid with mouse-following glow effect on borders.

<ComponentPreview
  component={<StackedLogosDemo />}
  code={`import { StackedLogos } from "@/components/ui/stacked-logos"

const group1 = [<Logo1 />, <Logo2 />, <Logo3 />, <Logo4 />]
const group2 = [<Logo5 />, <Logo6 />, <Logo7 />, <Logo8 />]

export function Partners() {
  return (
    <StackedLogos
      logoGroups={[group1, group2, group3, group4]}
      duration={20}
      stagger={2}
    />
  )
}`}
/>

## Install using CLI

<CLICommand componentName="stacked-logos" />

## Install Manually

<Dependencies step={1} title="Add util file">
    <p className="text-[13px] text-muted-foreground mt-2 mb-8">
        <code className="text-foreground font-mono text-xs bg-neutral-100 dark:bg-[#161616] border border-neutral-200 dark:border-neutral-800 px-2 py-1 rounded-md">lib/utils.ts</code>
    </p>
    <CodeBlock 
        language="tsx"
        code={`import { ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}`}
    />
</Dependencies>

<Dependencies step={2} title="Add styles to global CSS">
    <p className="text-[13px] text-muted-foreground mt-2 mb-8">Add the following styles to your <code className="text-foreground font-mono text-xs bg-neutral-100 dark:bg-[#161616] border border-neutral-200 dark:border-neutral-800 px-2 py-1 rounded-md mx-1">app/globals.css</code> file</p>
    <CodeBlock 
        language="css"
        code={`/* StackedLogos - CSS Variables & Animations */
.stacked-logos {
  --duration: 30;
  --items: 4;
  --lists: 4;
  --stagger: 0;
  --logo-width: 200px;
  --mouse-x: 0px;
  --mouse-y: 0px;
}

.stacked-logos:hover .stacked-logos__glow {
  opacity: 1;
}

.stacked-logos:hover .stacked-logos__border-glow {
  opacity: 1;
}

.stacked-logos__cell {
  --base-delay: calc(sin((var(--index) / var(--lists)) * 45deg) * var(--stagger));
}

.stacked-logos__logo {
  animation-name: stacked-logos-appear;
  animation-duration: calc(var(--duration) * 1s);
  animation-fill-mode: both;
  animation-iteration-count: infinite;
  animation-delay: calc(
    (var(--duration) / var(--items)) * (var(--items) - var(--i)) * -1s +
    (var(--base-delay, 0) * 1s)
  );
}

@keyframes stacked-logos-appear {
  0%, 100% { opacity: 0; filter: blur(4px); }
  5%, 20% { opacity: 1; filter: blur(0); }
  25%, 100% { opacity: 0; filter: blur(4px); }
}

@media (prefers-reduced-motion: reduce) {
  .stacked-logos__logo {
    animation: none;
    opacity: 1;
    filter: none;
  }
  .stacked-logos__item:not(:first-child) {
    display: none;
  }
}`}
    />
</Dependencies>

<Dependencies step={3} title="Copy the source code">
    <p className="text-[13px] text-muted-foreground mt-2 mb-8">Copy the code below and paste it into <code className="text-foreground font-mono text-xs bg-neutral-100 dark:bg-[#161616] border border-neutral-200 dark:border-neutral-800 px-2 py-1 rounded-md mx-1">components/ui/stacked-logos.tsx</code></p>
    <CodeBlock
        language="tsx"
        title="components/ui/stacked-logos.tsx"
        expandable={true}
        code={`"use client";

import * as React from "react";
import { cn } from "@/lib/utils";

export interface StackedLogosProps {
    logoGroups: React.ReactNode[][];
    duration?: number;
    stagger?: number;
    logoWidth?: string;
    className?: string;
}

export const StackedLogos = ({
    logoGroups,
    duration = 30,
    stagger = 0,
    logoWidth = "200px",
    className,
}: StackedLogosProps) => {
    const itemCount = logoGroups[0]?.length || 0;
    const columns = logoGroups.length;
    const containerRef = React.useRef<HTMLDivElement>(null);
    const gridRef = React.useRef<HTMLDivElement>(null);

    const handleMouseMove = React.useCallback((e: React.MouseEvent<HTMLDivElement>) => {
        if (!containerRef.current || !gridRef.current) return;
        const rect = gridRef.current.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        containerRef.current.style.setProperty('--mouse-x', \`\${x}px\`);
        containerRef.current.style.setProperty('--mouse-y', \`\${y}px\`);
    }, []);

    return (
        <div
            ref={containerRef}
            className={cn("stacked-logos relative w-full", className)}
            style={{
                "--duration": duration,
                "--items": itemCount,
                "--lists": columns,
                "--stagger": stagger,
                "--logo-width": logoWidth,
            } as React.CSSProperties}
            onMouseMove={handleMouseMove}
        >
            <div ref={gridRef} className="grid relative" style={{ gridTemplateColumns: \`repeat(\${columns}, \${logoWidth})\` }}>
                {/* Background glow */}
                <div className="stacked-logos__glow pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 z-10"
                    style={{ background: 'radial-gradient(500px circle at var(--mouse-x, 0) var(--mouse-y, 0), rgba(251,191,36,0.1), transparent 70%)' }} />
                
                {/* Border glow */}
                <div className="stacked-logos__border-glow pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 z-20"
                    style={{
                        background: 'radial-gradient(600px circle at var(--mouse-x, 0) var(--mouse-y, 0), rgba(251,191,36,1), transparent 40%)',
                        maskImage: \`repeating-linear-gradient(to right, transparent, transparent calc(\${logoWidth} - 1px), black calc(\${logoWidth} - 1px), black \${logoWidth}), linear-gradient(to bottom, black 0, black 1px, transparent 1px, transparent calc(100% - 1px), black calc(100% - 1px), black 100%)\`,
                        WebkitMaskImage: \`repeating-linear-gradient(to right, transparent, transparent calc(\${logoWidth} - 1px), black calc(\${logoWidth} - 1px), black \${logoWidth}), linear-gradient(to bottom, black 0, black 1px, transparent 1px, transparent calc(100% - 1px), black calc(100% - 1px), black 100%)\`,
                        maskComposite: 'add',
                    }} />
                
                {/* Left edge glow */}
                <div className="stacked-logos__border-glow pointer-events-none absolute top-0 bottom-0 left-0 w-px opacity-0 transition-opacity duration-300 z-20"
                    style={{ background: 'radial-gradient(600px circle at var(--mouse-x, 0) var(--mouse-y, 0), rgba(251,191,36,1), transparent 40%)' }} />

                {logoGroups.map((logos, groupIndex) => (
                    <div key={groupIndex} className="stacked-logos__cell relative grid"
                        style={{ "--index": groupIndex, gridTemplate: "1fr / 1fr" } as React.CSSProperties}>
                        {/* Border lines */}
                        <div className="absolute top-0 bottom-0 right-0 w-px bg-zinc-200 dark:bg-zinc-800" />
                        <div className="absolute left-0 right-0 bottom-0 h-px bg-zinc-200 dark:bg-zinc-800" />
                        <div className="absolute left-0 right-0 top-0 h-px bg-zinc-200 dark:bg-zinc-800" />
                        {groupIndex === 0 && <div className="absolute top-0 bottom-0 left-0 w-px bg-zinc-200 dark:bg-zinc-800" />}

                        {logos.map((logo, logoIndex) => (
                            <div key={logoIndex} className="stacked-logos__item col-start-1 row-start-1 grid place-items-center py-16 px-8"
                                style={{ "--i": logoIndex } as React.CSSProperties}>
                                <div className="stacked-logos__logo w-full h-8 flex items-center justify-center [&>svg]:h-full [&>svg]:w-auto [&>svg]:fill-zinc-700 dark:[&>svg]:fill-zinc-300">
                                    {logo}
                                </div>
                            </div>
                        ))}
                    </div>
                ))}
            </div>
        </div>
    );
};

StackedLogos.displayName = "StackedLogos";
export default StackedLogos;`}
    />
</Dependencies>

## Usage

<CodeBlock 
    language="tsx" 
    code={`import { StackedLogos } from "@/components/ui/stacked-logos"

const logos1 = [<Logo1 />, <Logo2 />, <Logo3 />, <Logo4 />]
const logos2 = [<Logo5 />, <Logo6 />, <Logo7 />, <Logo8 />]

export function PartnersSection() {
  return (
    <StackedLogos
      logoGroups={[logos1, logos2, logos3, logos4]}
      duration={20}
      stagger={2}
      logoWidth="200px"
    />
  )
}`} 
/>

### Fast Animation

<ComponentPreview
  component={<StackedLogosFast />}
  code={`<StackedLogos logoGroups={groups} duration={10} stagger={1} />`}
/>

### Slow Animation

<ComponentPreview
  component={<StackedLogosSlow />}
  code={`<StackedLogos logoGroups={groups} duration={40} stagger={3} />`}
/>

### Two Groups Only

<ComponentPreview
  component={<StackedLogosTwoGroups />}
  code={`<StackedLogos logoGroups={[group1, group2]} duration={15} logoWidth="140px" />`}
/>

### Custom Width

<ComponentPreview
  component={<StackedLogosWide />}
  code={`<StackedLogos logoGroups={groups} logoWidth="150px" stagger={1.5} />`}
/>

## Props

<PropsTable
  data={[
    { prop: "logoGroups", type: "React.ReactNode[][]", defaultValue: "-", description: "Array of logo groups. Each group is an array of logo elements." },
    { prop: "duration", type: "number", defaultValue: "30", description: "Full animation cycle duration in seconds." },
    { prop: "stagger", type: "number", defaultValue: "0", description: "Stagger factor for timing offset between groups." },
    { prop: "logoWidth", type: "string", defaultValue: "\"200px\"", description: "Width of each logo container." },
    { prop: "className", type: "string", defaultValue: "-", description: "Additional classes." }
  ]}
/>
